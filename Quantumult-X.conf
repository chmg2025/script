#==============UserScript==============#
# æœ¬é…ç½®æ²¡æœ‰åˆ†æµ çº¯æ‰‹åŠ¨é€‰æ‹©èŠ‚ç‚¹
# æ—¥æœŸ: 2025-06-16
# æœ¬é…ç½®åœ°å€ï¼šhttps://raw.githubusercontent.com/chmg2025/script/refs/heads/main/Quantumult-X.conf

# å»ºè®®åœ¨ã€Œå…¶ä»–è®¾ç½®ã€é‡Œã€ŒGeoLite2ã€çš„ã€Œæ¥æºã€å¡«å†™ä½¿ç”¨ä¸‹é¢é“¾æ¥ï¼Œå¹¶å¼€å¯ã€Œè‡ªåŠ¨æ›´æ–°ã€
; https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
; https://raw.githubusercontent.com/Hackl0us/GeoIP2-CN/release/Country.mmdb

# "reject" ç­–ç•¥ä¼šè¿”å› HTTP çŠ¶æ€ç  404,ä¸é™„å¸¦ä»»ä½•é¢å¤–å†…å®¹
# "reject-200" ç­–ç•¥ä¼šè¿”å› HTTP çŠ¶æ€ç  200,ä¸é™„å¸¦ä»»ä½•é¢å¤–å†…å®¹
# "reject-img" ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  200,åŒæ—¶é™„å¸¦ 1px gif
# "reject-dict" ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  200,åŒæ—¶é™„å¸¦ä¸€ä¸ªç©ºçš„ JSON å¯¹è±¡
# "reject-array" ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  200,åŒæ—¶é™„å¸¦ä¸€ä¸ªç©ºçš„ JSON æ•°ç»„

#**************************************#
[general]
# èŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•ï¼Œserver_check_urlæŒ‡å®šçš„ç½‘å€è¿›è¡Œç›¸åº”æµ‹è¯•ï¼Œä»¥ç¡®è®¤èŠ‚ç‚¹çš„å¯ç”¨æ€§
server_check_url= http://www.gstatic.com/generate_204
;server_check_url=http://cp.cloudflare.com/generate_204
;server_check_url= http://www.qualcomm.cn/generate_204
;server_check_url=http://captive.apple.com/generate_204
;server_check_url =http://www.google.com/generate_204

# æœåŠ¡å™¨æµ‹è¯•è¶…æ—¶æ—¶é—´ (æ¯«ç§’)
server_check_timeout=2000

# ç”¨äºCheckèŠ‚ç‚¹IPåœ°å€(ä»¥ä¸‹geo_location_checkerä»»é€‰ä¸€ä¸ªå³å¯)
;geo_location_checker = http://ip-api.com/json/?lang=zh-CN, https://gitlab.com/lodepuly/vpn_tool/raw/main/Resource/Script/GeoIP/Geo_Location_Checker_for_QX.js
# æ˜¾ç¤ºåç§°-è¯¦ç»†åœ°å€-å›½æ——
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/GeoLocationChecker/QuantumultX/IP-API.js
# ä¸­æ–‡æ˜¾ç¤ºåœ°åŒº
;geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js
# æ˜¾ç¤ºåç§°åŠæ— å›½æ——
;geo_location_checker=http://extreme-ip-lookup.com/json/, https://raw.githubusercontent.com/crossutility/Quantumult-X/master/sample-location-with-script.js
# æ˜¾ç¤ºè‹±æ–‡åç§°åŠå›½æ——
;geo_location_checker=http://ifconfig.co/json, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IPConfig.js

# èµ„æºè§£æå™¨ï¼Œè‡ªå®šä¹‰å„ç±»è¿œç¨‹èµ„æºçš„è½¬æ¢ã€å¦‚èŠ‚ç‚¹ã€è§„åˆ™-filterã€é‡å†™-rewriteç­‰
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js

# ä¸‹åˆ—è¡¨ä¸­å†…å®¹å°†ä¸ç»è¿‡QuantumultXçš„å¤„ç†
excluded_routes=239.255.255.250/32, 24.105.30.129/32, 185.60.112.157/32, 185.60.112.158/32, 182.162.132.1/32
udp_whitelist=1-442, 444-65535

# ç¬¬ä¸€ä¸ªfilterä¸º4gæ¨¡å¼å¼€å¯è§„åˆ™åˆ†æµï¼Œç¬¬äºŒä¸ªfilterä¸ºå…¶ä»–wifiä¸‹å¼€å¯è§„åˆ™åˆ†æµï¼Œç¬¬ä¸‰ä¸ªwifi1ä¿®æ”¹æˆä½ è·¯ç”±å™¨ç¿»å¢™çš„wifiåå¼€å¯ç›´è¿æ¨¡å¼ï¼Œç¬¬å››ä¸ªwifi2ä¸ºä½ å…¬å¸æˆ–è€…å…¶ä»–æœ‰è·¯ç”±å™¨ç¿»å¢™çš„WiFiåèµ°ç›´è¿ï¼‰
# é»˜è®¤å…³é—­æ ¹æ®wifiåˆ‡æ¢æ¨¡å¼ï¼Œå¦‚éœ€å¼€å¯ï¼Œåˆ é™¤ä¸‹æ–¹çš„";"å³å¯
;running_mode_trigger=filter, filter, wifi1:all_direct, wifi2: all_direct

# dns_exclusion_listä¸­çš„åŸŸåå°†ä¸ä½¿ç”¨fake-ipæ–¹å¼, å¤šä¸ªåŸŸåç”¨â€œ, â€è¿æ¥ã€‚å…¶å®ƒåŸŸååˆ™å…¨éƒ¨é‡‡ç”¨ fake-ipåŠè¿œç¨‹è§£æçš„æ¨¡å¼
dns_exclusion_list=*.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn, *.cmbchina.com


#**************************************#
[dns]
; ç¦ç”¨ç³»ç»Ÿ DNSï¼ˆno-systemï¼‰ ä»¥åŠ ipv6
no-system
no-ipv6
;æ”¯æŒå‚æ•° excluded_ssids , included_ssids(1.0.29+) æŒ‡å®šåœ¨ç‰¹å®š Wi-Fiä¸‹å¤±æ•ˆ/ç”Ÿæ•ˆ

// circumvent-ipv4-answer, circumvent-ipv6-answer å‚æ•°
//1ã€å½“å¹¶å‘å‘å¤šä¸ªä¸Šæ¸¸ DNS è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¦‚å“åº”æœ€å¿«çš„ä¸Šæ¸¸ DNS æŠ¢ç­”çš„ç»“æœå‘½ä¸­äº†è¯¥æ¡ç›®ï¼Œåˆ™ Quantumult X Tunnel DNS æ¨¡å—ä¼šç­‰å¾…å…¶ä»– DNS æœåŠ¡å™¨çš„å“åº”ç»“æœï¼ˆå¦‚æŠ¢ç­”çš„ç»“æœä¸­è‡³å°‘æœ‰ä¸€ä¸ªä¸å±äºè¯¥æ¡ç›®ï¼Œåˆ™ä¸ä¼šç­‰å¾…å…¶ä»– DNS çš„å“åº”ï¼Œæ­¤æ—¶æœ‰æ•ˆç»“æœé‡‡ç”¨ä¸å±äºè¯¥æ¡ç›®çš„æ‰€æœ‰è®°å½•ï¼‰
//2ã€å¦‚æ‰€æœ‰ä¸Šæ¸¸ DNS è¿”å›çš„æ‰€æœ‰ç»“æœå‡å‘½ä¸­è¯¥æ¡ç›®ï¼Œåˆ™åˆ¤å®šä¸º DNS æŸ¥è¯¢å¤±è´¥
//3ã€å¦‚é…ç½®çš„ä¸Šæ¸¸ DNS åŒ…å«æœ‰å»å¹¿å‘ŠåŠŸèƒ½çš„ DNS æœåŠ¡å™¨ï¼Œè¯·å‹¿ä½¿ç”¨è¯¥å‚æ•°
;circumvent-ipv4-answer = 127.0.0.1, 0.0.0.0
;circumvent-ipv6-answer = ::

//å¦‚éœ€ä½¿ç”¨ DoH3ï¼ŒDNS over HTTP/3ï¼Œè¯·å¼€å¯ä¸‹é¢ğŸ‘‡å‚æ•°
;prefer-doh3

;æŒ‡å®š dns æœåŠ¡å™¨ï¼Œå¹¶å‘å“åº”é€‰å–æœ€ä¼˜ç»“æœ
server=114.114.114.114
server=202.141.176.93
server=202.141.178.13
server=117.50.10.10
server=223.5.5.5
server=119.29.29.29:53
server=119.28.28.28
# æŒ‡å®šåŸŸåè§£æDNS
server=/*icloud.com/119.29.29.29
server=/*icloud.com.cn/119.29.29.29
server=/*tencent.com/119.29.29.29
server=/*weixin.com/119.29.29.29
;å¦‚æŒ‡å®š doh æœåŠ¡ï¼Œåˆ™ğŸ‘†ï¸ä¸Šé¢çš„ä¸€èˆ¬ dns è§£æå‡å¤±æ•ˆ é¢å¤–å‚æ•°ï¼Œåœ¨ç‰¹å®šç½‘ç»œä¸‹ç¦ç”¨è¯¥ doh
;doh-server=xxx.com, excluded_ssids=SSID1, SSID2
; 1.0.29 ç‰ˆæœ¬åæ”¯æŒå¤šä¸ª doh å¹¶å‘ï¼ŒğŸ‘‡
;doh-server = https://dns.alidns.com/dns-query,https://doh.pub/dns-query,https://dns.google/dns-query,https://223.5.5.5/dns-query, https://223.6.6.6/dns-query
; 1.0.29ä»¥å‰ç‰ˆæœ¬ä½¿ç”¨
doh-server = https://doh.pub/dns-query, https://dns.alidns.com/dns-query

; 1.0.29 ç‰ˆæœ¬åæ”¯æŒ alias æ˜ å°„ç±»å‹
;alias=/example.com/another-example.com

;å¦‚æŒ‡å®šäº† DoQ æœåŠ¡ï¼Œåˆ™ DoH ä»¥åŠå…¶å®ƒ dnsè§£æå‡å¤±æ•ˆ
;doq-server = quic://dns.adguard.com
;doq-server = quic://dns1.example.com, quic://dns2.example.com
;doq-server = quic://dns.adguard.com, excluded_ssids=SSID1
;doq-server = quic://dns.adguard.com, included_ssids=SSID2

;æŒ‡å®šåŸŸåè§£ædns, ä¸‹é¢ä¸ºç¤ºèŒƒï¼ŒæŒ‰éœ€å¯ç”¨, åŒæ ·æ”¯æŒ excluded_ssids/included_ssids å‚æ•°
;server=/*.taobao.com/223.5.5.5, excluded_ssids=My-Wifi, Your-Wifi
;server=/*.tmall.com/223.5.5.5, included_ssids=His-Wifi
;server=/example1.com/8.8.4.4
;server=/*.example2.com/223.5.5.5
;server=/example4.com/[2001:4860:4860::8888]:53
;address=/example5.com/192.168.16.18
;address=/example6.com/[2001:8d3:8d3:8d3:8d3:8d3:8d3:8d3]
//æ˜ å°„åŸŸååˆ°å…¶å®ƒåŸŸåçš„ç±»å‹
;alias = /example7.com/another-example.com



#**************************************#

[policy]
static=ä»£ç†åŠ é€Ÿ, proxy, è‡ªåŠ¨, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Vimeo.png
url-latency-benchmark=è‡ªåŠ¨, server-tag-regex=.*, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/Vimeo.png


#**************************************#
# æœ¬åœ°èŠ‚ç‚¹â†“â†“â†“â†“â†“â†“â†“â†“â†“
[server_local]



#**************************************#
# æ·»åŠ è¿œç¨‹èŠ‚ç‚¹â†“â†“â†“â†“â†“â†“â†“â†“â†“
[server_remote]






#**************************************#
# æœ¬åœ°åˆ†æµè§„åˆ™(ç›¸åŒè§„åˆ™ä¸‹ï¼Œæœ¬åœ°è§„åˆ™å°†è¦†ç›–è¿œç¨‹è§„åˆ™ï¼Œä¼˜å…ˆç”Ÿæ•ˆ)â†“â†“â†“â†“â†“â†“â†“â†“â†“
[filter_local]
# å¤§é™†æµé‡
geoip, cn, direct

# å…¶ä»–æµé‡
final, ä»£ç†åŠ é€Ÿ

# Local Area Network å±€åŸŸç½‘
host-suffix, local, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 100.64.0.0/10, direct
ip-cidr, 224.0.0.0/4, direct
ip6-cidr, fe80::/10, direct

# ä¸åœ¨ä¸Šè¿°è§„åˆ™ä¸­(è¿œç¨‹ä»¥åŠæœ¬åœ°)çš„å‰©ä½™è¯·æ±‚ï¼Œå°†èµ°final æŒ‡å®šçš„èŠ‚ç‚¹/ç­–ç•¥ï¼Œè¿™é‡Œå³æ˜¯ â†’ å…¨çƒåŠ é€Ÿ


#**************************************#
# è¿œç¨‹åˆ†æµè§„åˆ™è®¢é˜…ï¼Œéƒ¨åˆ†è§„åˆ™æœ‰å…ˆåé¡ºåºè¦æ±‚ï¼Œè°ƒæ•´é¡ºåºå¯èƒ½å¤±æ•ˆï¼Œå°†ç½‘ç»œè¯·æ±‚è¿›è¡Œåˆ†æµï¼Œç½‘ç»œè¯·æ±‚çš„èµ°å‘ç”±åŒ¹é…åˆ°çš„ç­–ç•¥ç»„å†³å®šâ†“â†“â†“â†“â†“â†“â†“â†“â†“
[filter_remote]


#**************************************#
# æœ¬åœ°é‡å†™è§„åˆ™â†“â†“â†“â†“â†“â†“â†“â†“â†“
[rewrite_local]


#**************************************#
# è¿œç¨‹é‡å†™â†“â†“â†“â†“â†“â†“â†“â†“â†“
[rewrite_remote]


#**************************************#
# è„šæœ¬é…ç½®â†“â†“â†“â†“â†“â†“â†“â†“â†“
[task_local]


#**************************************#
[mitm]
# è·³è¿‡è¯ä¹¦éªŒè¯
skip_validating_cert = true
force_sni_domain_name = false

########################################
# passphraseå’Œp12ä»£ä¸ºè¯ä¹¦&ä¸»æœºåéƒ¨åˆ†ï¼Œå¯å»UIç•Œé¢è‡ªè¡Œç”Ÿæˆå¹¶å®‰è£…è¯ä¹¦ï¼Œä¼šåœ¨æ­¤ç”Ÿæˆå¯¹åº”ä¿¡æ¯ï¼Œä¹Ÿå¯åœ¨æ›´æ–°é…ç½®å‰å¯æŠŠæ—§çš„é…ç½®ä¸­passphraseå’Œp12ä»£ç æ‹·è´ä¸‹æ¥, å¯¼å…¥æ–°çš„é…ç½®æ–‡ä»¶æŠŠå†…å®¹ç²˜è´´åœ¨å¯¹åº”ä½ç½®å°±ä¸ç”¨é‡è£…è¯ä¹¦ã€‚

passphrase =
p12 =

# ä¸»æœºå
hostname =
